<%
table.init do |t|
#  t.caption = 'Price formulas'
  t.heads = ['formula - params', 'formula - stat params','formula - method', 'formula - tarif condition', 'formula - group_by',  'price unit', 'volume', 'volume uint', 'Description']
  t.set_fields do |f| 
  [
#    f.id, 
#    f.name, 
#    (f.price_list.name if f.price_list), 
#    f.calculation_order, 
#    (f.standard_formula.name if f.standard_formula), 
#    f.formula, 
#    (f.price.to_s(:rounded, precision: 2) if f.price), 
    (f.standard_formula.formula['params'] if f.standard_formula and f.standard_formula.formula), 
    (f.standard_formula.formula['stat_params'] if f.standard_formula and f.standard_formula.formula), 
    (f.standard_formula.formula['method'] if f.standard_formula and f.standard_formula.formula), 
    (f.standard_formula.formula['tarif_condition'] if f.standard_formula and f.standard_formula.formula), 
    (f.standard_formula.formula['group_by'] if f.standard_formula and f.standard_formula.formula), 
    (f.standard_formula.price_unit.name if f.standard_formula and f.standard_formula.price_unit), 
    (f.standard_formula.volume.name if f.standard_formula and f.standard_formula.volume), 
    (f.standard_formula.volume_unit.name if f.standard_formula and f.standard_formula.volume_unit), 
    (f.standard_formula.description if f.standard_formula), 
#    (f.created_at.to_formatted_s(:short) if  f.created_at), 
#    (f.updated_at.to_formatted_s(:short) if f.updated_at), 
#    link_to( 'Show', f), 
#    link_to( 'Edit', edit_price_list_path(f)), 
#    link_to( 'Destroy', f, method: :delete, data: { confirm: 'Are you sure?' } )
  ] 
  end
end
%>


