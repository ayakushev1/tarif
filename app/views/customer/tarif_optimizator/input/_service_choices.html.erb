<%
form_item.init do |f|
#  f.caption = "Choice of service"	
  f.set_fields do |filtr_name|
    html_options = {:action_name => customer_tarif_optimizator_index_path }
    s = f.session_filtr_params
#	s = session[:filtr][filtr_name]
	
  [
  	[
     label(filtr_name, "tarifs_id", "Тарифы для оптимизации"),
     text_area(filtr_name, "tarifs_id", html_options.merge({:type => 'textarea', :value => s["tarifs_id"], :rows => 1 }) ),

     label(filtr_name, "tarif_options_id", "Тарифные опции для оптимизации"),
     text_area(filtr_name, "tarif_options_id", html_options.merge({:type => 'textarea', :value => s["tarif_options_id"], :rows => 2  }) ),   
  	],
  	
  	[
     label(filtr_name, "common_services_id", "Общие сервисы"),
     text_area(filtr_name, "common_services_id", html_options.merge({:type => 'textarea', :value => s["common_services_id"], :rows => 1  }) ),     		
        
  	 label(filtr_name, "accounting_period", "Период за который проводить расчет тарифов"),
  	 collection_select(filtr_name, "accounting_period", 
  	   Customer::Call.where(:user_id => controller.current_user.id).select("description->>'accounting_period' as id, description->>'accounting_period' as name").uniq, 
  	   :id, :name, {:selected => s["accounting_period"]}, html_options ),
  	],
  	
  	[
     label(filtr_name, "calculate_only_chosen_services", "Считать только выбранные тариф и опции?"),
 	 select(filtr_name, "calculate_only_chosen_services", [["Да", true], ["Считать все варианты", false]], {:selected => s["calculate_only_chosen_services"]}, html_options ),
  	],
  ]
	    
  end
end
%>
