<%
begin
	f = File.open("/proc/#{Process.pid}/smaps")
	f.gets
	line = f.gets
	line =~ /(\d+) kB/ 
	f.close
	message =$1.to_i  
	
rescue => e
	message = e
end

%>
<div><%= GC.stat %></div>
<br />
<div><%=  message %></div>
<br />
<div><%=  line %></div>
<br />

<div>operators calculation progress</div>
<%= render :partial => 'tarif_optimization_progress_bar', :layout => 'application/layouts/progress_bar', :locals => {:progress_bar => controller.operators_optimization_progress_bar} %>

<div>tarifs calculation  progress</div>
<%= render :partial => 'tarif_optimization_progress_bar', :layout => 'application/layouts/progress_bar', :locals => {:progress_bar => controller.tarifs_optimization_progress_bar} %>

<div>tarif calculations  progress</div>
<%= render :partial => 'tarif_optimization_progress_bar', :layout => 'application/layouts/progress_bar', :locals => {:progress_bar => controller.tarif_optimization_progress_bar} %>

